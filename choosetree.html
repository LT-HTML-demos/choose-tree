<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title></title>
</head>
<link rel="stylesheet" href="css/choose-tree.css"/>
<script src="./js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="./js/layer/layer.js" type="text/javascript" charset="utf-8"></script>
<body>
<div class="header">
    <div class="headers">
        <div class="logo"><a href="#"><img src="./img/logo.jpg"></a></div>
        <div class="nav">
            <ul>
                <li class="active"><a href="#">首页</a></li>
                <li><a href="#">所有项目</a></li>
                <li><a href="#">众筹指南</a></li>
                <li><a href="#">关于我们</a></li>
                <li> . . .</li>
            </ul>
        </div>
        <div class="entry">
            <div class="f-b"><a href="#">发布项目</a></div>
            <div class="entry-r"><img src="./img/entry.jpg"></div>
            <div class="entry-n">
                <ul>
                    <li><a href="#">微信名字</a></li>
                    <li><a href="#">个人主页</a></li>
                    <li><a href="#">我的项目</a></li>
                    <li><a href="#">捐款记录</a></li>
                    <li><a href="#">我的关注</a></li>
                    <li><a href="#">个人设置</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>


<div class="perhomepage">
    <div class="perhomepage_r certificate">
        <div class="perhomepage_rt perhomepage_rt1">
            <h1>项目信息</h1>
        </div>

        <div class="payconfirm">
            <div class="payconfirm_img">
                <img src="./img/images/img3_03.png"/>
            </div>
            <div class="payconfirm_r">
                <h1>项目名称：<span>交大校园梧桐树捐赠项目</span></h1>
                <p class="donate">
                    2017年10月26日，全球各地的医学校友、社会名流将齐聚西安交大医学部，共襄盛举！万众归心，庆典在即，让我们为母校盛会欢呼吧！请您出一份力，支持“抗战迁陕80周年纪念活动”，捐资将用于支付盛典活动必要的费用；您的捐助将令本次盛会更具纪念意义，溢彩流光！</p>
                <h3>进行中</h3>
                <h4>/ 剩余<span>188</span>可选</h4>
            </div>
        </div>

    </div>
</div>


<div class="donatetog">
    <div class="donatetog_head">
        <a class="choosetree">
            铭牌类型
        </a>
        <a class="choosetree choosetree1">
            选择位置
        </a>
        <a class="choosetree choosetree2">
            完成捐赠
        </a>
    </div>
    <div class="donatetog_c" style="display: block">
        <div class="chosetree2">
            <h1>可冠名树种</h1>
            <div class="chosetree2_r">
                <div class="donatetog_c1_rj chosetree2_r1" id="treeTypeSel">
                    <!--tree type sel area-->
                </div>
            </div>
        </div>
    </div>

    <div id="choosetree1" class="donatetog_c" style="display: block;">
        <div class="chosetree2" style="margin-top:0">
            <h1>请选择区域</h1>
            <div class="chosetree2_r">
                <div class="donatetog_c1_rj chosetree2_r1" id="areaTypeDiv">
                    <!--area btn-->
                </div>
            </div>
        </div>

        <div class="chosetree3">
            <h1>请选择位置</h1>
            <div class="chosetree3_t">
                <div class="chosetree3_t1">
                    <img src="./img/images/yezi_03.png"/>
                    <span>可选</span>
                </div>
                <div class="chosetree3_t1">
                    <img src="./img/images/yezi_07.png"/>
                    <span>不可选</span>
                </div>
                <div class="chosetree3_t1">
                    <img src="./img/images/yezi_05.png"/>
                    <span>已选</span>
                </div>

                <div class="chosetree3_t1">
                    <img src="./img/images/yezi_09.png"/>
                    <span>暂不开放</span>
                </div>
            </div>

            <div id="mapMainArea" style="    white-space: nowrap;position: relative;width: 100%;max-height:800px;overflow: hidden;overflow-x: scroll;overflow-y:scroll">
                <!--<div class="chtrditu"></div>-->


                <!--<div class="chtrditu"></div>-->
            </div>


            <div class="chtreeb" style="height: auto">
                <div id="chooseInfoDiv">

                </div>
                <p style="margin-top: 18px;">
                    <span style="margin-right: 20px;cursor: pointer" onclick="resetAllChoose()">清空已选</span>
                    <a class="persetc_btn" href="javascript:;" style="width: 90px;display: initial;padding:6px 10px" onclick="ok()">确定选择</a>
                    已选择<span id="totalNum"> 0 </span>个，共计<span id="totalMoney"> 0 </span>元
                </p>
            </div>

            <div class="choosebtn">
                <a id="chobtn1" class="persetc_btn choosebtn1" href="javascript:;">上一步</a>
                <a id="chobtn2" class="persetc_btn" href="javascript:;">下一步</a>

            </div>

        </div>
    </div>

</div>

<!--tpl start -->
<div class="chtreelu" id="rowTpl" style="display: none;height: 90px;overflow: initial;">
    <h1></h1>
    <ul class="chtreelul" style="white-space: nowrap;overflow: initial;">

    </ul>
</div>

<div class="choselu" id="rowTitleTpl" style="display: none;">
    <!--way neme-->
</div>

<li style="display: none;position: relative;cursor: pointer" id="treeTpl">
    <img src=""/>
    <p>01</p>
</li>

<div class="overview_sou" id="chooseInfoTpl" style="display: none">
    <span></span>
    <div class="overview_sougb" style="cursor: pointer"></div>
</div>
<!--tpl end -->
<div class="footer">
    <div class="footers">
        <ul>
            <li><a href="#">西安交通大学</a></li>
            <li><a href="#">西安交通大学教育基金会</a></li>
            <li><a href="#">西安交通大学校友网</a></li>
            <li><a href="#">西安交通大学学生处</a></li>
            <li><a href="#">西安交通大学就业网</a></li>
        </ul>
        <p><span>电话：029-82668199</span><span>传真：029-82668199</span><span>邮政编码：710049</span></p>
        <p>地址：西安市西安交通大学东南门出版大厦十九楼(1904、1905、1906、1907、1909办公室)</p>
        <div class="d-logo"><a href="#"><img src="./img/d-logo1.jpg"></a><a href="#"><img src="./img/d-logo2.jpg"></a>
        </div>
        <div class="footer-bo">
            <p>技术支持与维护：西安交通大学数据与信息中心</p>
            <p>版权所有 ：西安交通大学教育基金会 陕ICP备000001号</p>
        </div>
    </div>
</div>
<div class="side">
    <ul>
        <li><a href="javascript:goTop();"></a></li>
        <li><a href="#"><p>问题</p>
            <p>反馈</p></a></li>
        <li><img src="./img/juan.jpg"></li>
    </ul>
</div>
<script src="./js/choose.js" type="text/javascript" charset="utf-8"></script>
<script>
    var STATE_0 = 0;
    //可选
    var STATE_1 = 1;
    //不可选
    var STATE_2 = 2;
    //已选
    var STATE_3 = 3;
    //暂不开放
    var STATE_4 = 3;

    /**
     * 树类别
     *
     * _id  唯一类别id
     * name 树的名称
     * money 树的价格
     * info 信息
     * img 默认图
     * state_img_0
     * state_img_1  可选状态的图片
     * state_img_2  不可选状态的图片
     * state_img_3  已选状态图片
     * state_img_4  暂不开放状态图片
     * getImgByState   根据状态获取状态对应的图片
     */
    var treeTypeArr = [
        {
            _id: 0,
            name: '默认树',
            money: 1000,
            info: '',
            img: './img/images/yezi_07.png',
            state_img_0: '',
            state_img_1: './img/images/yezi_03.png',
            state_img_2: './img/images/yezi_07.png',
            state_img_3: './img/images/yezi_05.png',
            state_img_4: './img/images/yezi_09.png',
            getImgByState: function (state) {
                return imgSwitch(state, this);
            }
        },
        {
            _id: 1,
            name: '梧桐树',
            money: 1000,
            info: '',
            img: './img/images/tree1-3.png',
            state_img_0: '',
            state_img_1: './img/images/tree1-1.png',
            state_img_2: './img/images/tree1-3.png',
            state_img_3: './img/images/tree1-2.png',
            state_img_4: './img/images/tree1-4.png',
            getImgByState: function (state) {
                return imgSwitch(state, this);
            }
        },
        {
            _id: 2,
            name: '杨树',
            money: 5000,
            info: '',
            img: './img/images/tree2-3.png',
            state_img_0: '',
            state_img_1: './img/images/tree2-1.png',
            state_img_2: './img/images/tree2-3.png',
            state_img_3: './img/images/tree2-2.png',
            state_img_4: './img/images/tree2-4.png',
            getImgByState: function (state) {
                return imgSwitch(state, this);
            }
        }
    ];

    //区域数组
    var areaArr = [
        {
            title: '学森路'
        },
        {
            title: '梧桐西道南段'
        },
        {
            title: '梧桐西道北段'
        },
        {
            title: '梧桐东道南段'
        },
        {
            title: '梧桐东道南段'
        },
        {
            title: '梧桐东道南段'
        },
        {
            title: '梧桐东道南段'
        },
    ];

    //父级标题
    var pTitle = '学森路';
    //父级id
    var pId = 1;
    //行数
    var rowNum = 3;
    //列数
    var columnNum = 20;
    //可选的数量
    var chooseNum = 2;

    var choosedArr = [
        {
            row: 0,
            column: 0,
            state: 2,
            content: '姓名：小明<br>班级：软件14',
            treeType: getTreeById(1)
        },
        {
            row: 0,
            column: 1,
            state: 2,
            content: '姓名：小红<br>班级：软件14',
            treeType: getTreeById(1)
        },
    ];

    //1横向排列 2纵向排列
    var dispalyType = 1;

    //需要显示自定义文字的位置信息
    var wayArr = [
        {
            row: 0,
            column: 1,
            name: '学森路'
        },
    ];

    //设置默认树
    init({
        defaultTree: treeTypeArr[2]
    });

    //不设置默认树
    // init();

    var initTreeArr = [
        {
            row: 1,
            column: 5,
            state: 0,
        },
        {
            row: 1,
            column: 0,
            state: 1,
            treeType: getTreeById(1),//treeTypeArr中获取id为2的树种
            money: 10000    //自定义特殊vip位置价格  不填则为默认价格treeTypeArr[i].money
        },
    ];
    //初始化标记特殊树
    markTrees(initTreeArr);

    //标记已被其他用户选的树
    markTrees(choosedArr);

    setRowTitle(0, '北侧');
    setRowTitle(1, '南侧');

    //竖排列时居中位置调整使用
    // $('#row_0').css('margin-left', '30%');//竖着排列路文字的位置控制

    //确定选择 生成订单
    function ok() {
        var chooseOrder = makeOrder();
        console.log(chooseOrder)
    }
</script>
</body>
</html>






